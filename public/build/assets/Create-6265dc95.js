import{T as F,r as D,B as w,C as S,j as R,o as n,f as U,a as i,u as t,b as r,n as p,c as m,w as u,g as f,D as N,F as M,Z as I,d as c,t as v}from"./app-2dcae80d.js";import{s as O}from"./button.esm-9e6fb8b8.js";import{s as V}from"./calendar.esm-b6f177df.js";import{s as x}from"./inlinemessage.esm-0ec14736.js";import{s as g}from"./virtualscroller.esm-dd1c2e67.js";import{s as B}from"./inputtext.esm-ee8c0c16.js";import{s as $}from"./multiselect.esm-604803f9.js";import{_ as j}from"./AdminLayout-9dae27c2.js";import"./index.esm-2267cb30.js";import"./overlayeventbus.esm-cc52214e.js";import"./portal.esm-9d0ff783.js";import"./checkbox.esm-5eac2d71.js";import"./toast.esm-9cb58b5c.js";import"./confirmdialog.esm-1013cf0d.js";import"./dialog.esm-89cdd475.js";function h(o){let k=new Date(o),l=""+(k.getMonth()+1),a=""+k.getDate(),y=k.getFullYear();return l.length<2&&(l="0"+l),a.length<2&&(a="0"+a),[y,l,a].join("-")}const A={class:"[&>div]:mt-2"},E={class:"mb-3"},K={class:"gap-x-3 flex flex-wrap mb-3"},L={class:"md:w-1/2 flex flex-col flex-1 flex-shrink-0 w-full"},z={class:"md:w-1/2 flex flex-col flex-1 flex-shrink-0 w-full"},G={class:"md:w-1/2 flex flex-col flex-1 flex-shrink-0 w-full"},Y={class:"flex flex-col flex-shrink-0 w-full"},Z={class:"gap-x-3 flex mt-2"},q={class:"flex flex-col w-1/2"},H={class:"flex flex-col w-1/2"},J={class:"gap-x-3 flex mt-2"},Q={class:"flex flex-col w-1/2"},W={class:"flex flex-col w-1/2"},X={class:"flex flex-col"},ee={class:"mt-6 mb-3"},te={layout:j},ye=Object.assign(te,{__name:"Create",props:{errors:Object,rooms:Array},setup(o){const k=o,l=F({room_id:[],guest_name:"",total_person:0,total_price:0,from_date:"",to_date:"",checkin_time:"",checkout_time:""}),a=D(""),y=D("");w(()=>{l.checkin_time=a.value?new Date(a.value).toISOString():""}),w(()=>{l.checkout_time=y.value?new Date(y.value).toISOString():""});const T=S();function P(){l.transform(d=>({...d,from_date:h(d.from_date),to_date:h(d.to_date)})).post(route("admin.reservations.store"),{onSuccess:()=>T.add({severity:"success",summary:"Success",detail:"Added Reservation Successfully",life:3e3})})}const _=D(new Date);let b=R(()=>k.rooms.filter(d=>l.room_id.indexOf(d.id)>=0).reduce((d,e)=>d+e.price,0));return w(()=>{const e=new Date(l.from_date),s=new Date(l.to_date),C=Math.round(Math.abs((e-s)/864e5));l.total_price=(C+1)*b.value||0}),(d,e)=>(n(),U(M,null,[i(t(I),{title:"Create Reservation"}),r("div",null,[e[20]||(e[20]=r("h1",{class:"mb-3 text-5xl font-bold"},"Create New Reservation",-1)),r("div",A,[r("div",E,[e[15]||(e[15]=r("h2",{class:"mb-2 text-3xl font-normal"},"Room",-1)),r("div",K,[r("div",L,[e[9]||(e[9]=r("label",{for:"room"},"Room Number",-1)),i(t($),{modelValue:t(l).room_id,"onUpdate:modelValue":e[0]||(e[0]=s=>t(l).room_id=s),id:"room",options:o.rooms,optionLabel:"room_number",optionValue:"id",filter:"",placeholder:"Select rooms",maxSelectedLabels:5,class:p(["w-full",{"p-invalid":o.errors.room_id}])},null,8,["modelValue","options","class"]),o.errors.room_id?(n(),m(t(x),{key:0,severity:"error",class:"mt-2"},{default:u(()=>[c(v(o.errors.room_id),1)]),_:1})):f("",!0)]),r("div",z,[e[10]||(e[10]=r("label",{for:"guest_name"},"Guest Name",-1)),i(t(B),{id:"guest_name",modelValue:t(l).guest_name,"onUpdate:modelValue":e[1]||(e[1]=s=>t(l).guest_name=s),class:p([{"p-invalid":o.errors.guest_name},""])},null,8,["modelValue","class"]),o.errors.guest_name?(n(),m(t(x),{key:0,severity:"error",class:"mt-2"},{default:u(()=>[c(v(o.errors.guest_name),1)]),_:1})):f("",!0)]),r("div",G,[e[11]||(e[11]=r("label",{for:"totalPerson"},"Total Number Of Person",-1)),i(t(g),{id:"totalPerson",modelValue:t(l).total_person,"onUpdate:modelValue":e[2]||(e[2]=s=>t(l).total_person=s),class:p([{"p-invalid":o.errors.total_person},""])},null,8,["modelValue","class"]),o.errors.total_person?(n(),m(t(x),{key:0,severity:"error",class:"mt-2"},{default:u(()=>[c(v(o.errors.total_person),1)]),_:1})):f("",!0)]),r("div",Y,[e[12]||(e[12]=r("label",{for:"pricePerDay"},"Price Per Day",-1)),i(t(g),{id:"pricePerDay",disabled:"",mode:"currency",currency:"MMK",modelValue:t(b),"onUpdate:modelValue":e[3]||(e[3]=s=>N(b)?b.value=s:b=s),pt:{input:{class:"!opacity-100"}}},null,8,["modelValue"]),o.errors.total_price?(n(),m(t(x),{key:0,severity:"error",class:"mt-2"},{default:u(()=>[c(v(o.errors.total_price),1)]),_:1})):f("",!0)])]),e[16]||(e[16]=r("h3",{class:"mb-2 text-3xl font-normal"},"Room Reservation Date",-1)),r("div",Z,[r("div",q,[e[13]||(e[13]=r("label",{for:"reservedFrom"},"From",-1)),i(t(V),{modelValue:t(l).from_date,"onUpdate:modelValue":e[4]||(e[4]=s=>t(l).from_date=s),minDate:_.value,manualInput:!1,id:"reservedFrom",class:p([{"p-invalid":o.errors.from_date},"w-full"]),pt:{input:{class:"p-4 rounded"}}},null,8,["modelValue","minDate","class"]),o.errors.from_date?(n(),m(t(x),{key:0,severity:"error",class:"mt-2"},{default:u(()=>[c(v(o.errors.from_date),1)]),_:1})):f("",!0)]),r("div",H,[e[14]||(e[14]=r("label",{for:"reservedTo"},"To",-1)),i(t(V),{modelValue:t(l).to_date,"onUpdate:modelValue":e[5]||(e[5]=s=>t(l).to_date=s),minDate:t(l).from_date||null,manualInput:!1,id:"reservedTo",class:p({"p-invalid":o.errors.to_date}),pt:{input:{class:"p-4 rounded"}}},null,8,["modelValue","minDate","class"]),o.errors.to_date?(n(),m(t(x),{key:0,severity:"error",class:"mt-2"},{default:u(()=>[c(v(o.errors.to_date),1)]),_:1})):f("",!0)])])]),r("div",J,[r("div",Q,[e[17]||(e[17]=r("label",{for:"checkin"},"Checkin",-1)),i(t(V),{modelValue:a.value,"onUpdate:modelValue":e[6]||(e[6]=s=>a.value=s),minDate:t(l).from_date||_.value,maxDate:t(l).to_date||null,manualInput:!1,id:"checkin",showTime:!0,hourFormat:"24",class:p({"p-invalid":o.errors.checkin_time}),disabled:!t(l).from_date,pt:{input:{class:"p-4 rounded"}}},null,8,["modelValue","minDate","maxDate","class","disabled"]),o.errors.checkin_time?(n(),m(t(x),{key:0,severity:"error",class:"mt-2"},{default:u(()=>[c(v(o.errors.checkin_time),1)]),_:1})):f("",!0)]),r("div",W,[e[18]||(e[18]=r("label",{for:"checkout"},"Checkout",-1)),i(t(V),{modelValue:y.value,"onUpdate:modelValue":e[7]||(e[7]=s=>y.value=s),minDate:a.value||null,manualInput:!0,id:"checkout",showTime:!0,hourFormat:"24",class:p({"p-invalid":o.errors.checkout_time}),disabled:!a.value,pt:{input:{class:"p-4 rounded"}}},null,8,["modelValue","minDate","class","disabled"]),o.errors.checkout_time?(n(),m(t(x),{key:0,severity:"error",class:"mt-2"},{default:u(()=>[c(v(o.errors.checkout_time),1)]),_:1})):f("",!0)])]),r("div",X,[e[19]||(e[19]=r("label",{for:"totalPrice"},"Total Price",-1)),i(t(g),{id:"totalPrice",modelValue:t(l).total_price,"onUpdate:modelValue":e[8]||(e[8]=s=>t(l).total_price=s),mode:"currency",currency:"MMK",class:p({"p-invalid":o.errors.total_price})},null,8,["modelValue","class"]),o.errors.total_price?(n(),m(t(x),{key:0,severity:"error",class:"mt-2"},{default:u(()=>[c(v(o.errors.total_price),1)]),_:1})):f("",!0)]),r("div",ee,[i(t(O),{label:"Add Reservation",loading:t(l).processing,outlined:"",onClick:P},null,8,["loading"])])])])],64))}});export{ye as default};
