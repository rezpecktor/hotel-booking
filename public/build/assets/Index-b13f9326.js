import{_ as z}from"./CustomPaginator-15680d0a.js";import{I as R,B as N,o as l,f as _,b as r,a,u as e,N as y,E as A,C as M,G as j,w as s,F as C,Z as L,i as V,t as u,H as E,d as v,n as U,c as D,J as G}from"./app-2dcae80d.js";import{s as f}from"./button.esm-9e6fb8b8.js";import{s as B}from"./calendar.esm-b6f177df.js";import{s as m,a as Y}from"./datatable.esm-5d2a013d.js";import{s as H}from"./dynamicdialog.esm-a318b191.js";import{s as J}from"./toast.esm-9cb58b5c.js";import{_ as O}from"./AdminLayout-9dae27c2.js";import"./virtualscroller.esm-dd1c2e67.js";import"./inputtext.esm-ee8c0c16.js";import"./index.esm-2267cb30.js";import"./overlayeventbus.esm-cc52214e.js";import"./portal.esm-9d0ff783.js";import"./dropdown.esm-61b66e7c.js";import"./checkbox.esm-5eac2d71.js";import"./radiobutton.esm-04580fc4.js";import"./dialog.esm-89cdd475.js";import"./confirmdialog.esm-1013cf0d.js";const Z={class:"w-[30rem]"},K={class:"gap-x-2 flex mb-2"},Q={class:"flex flex-col w-full"},W={class:"flex flex-col w-full"},X={class:"flex justify-end"},P={__name:"Filter",setup(h){const g=new URLSearchParams(document.location.search),c=R({from_date:g.get("from_date")?new Date(g.get("from_date")):"",to_date:g.get("to_date")?new Date(g.get("to_date")):""});let k=R({from_date:"",to_date:""});function w(){y.visit(route("admin.reservations.index",{_query:k}))}return N(()=>{let n=new Date(c.from_date),o=`${n.getFullYear()}-${n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1}-${n.getDate()<10?"0":""}${n.getDate()}`;k.from_date=c.from_date?o:null}),N(()=>{let n=new Date(c.to_date),o=`${n.getFullYear()}-${n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1}-${n.getDate()<10?"0":""}${n.getDate()}`;k.to_date=c.to_date?o:null}),(n,o)=>(l(),_("div",Z,[o[4]||(o[4]=r("h1",{class:"mb-2 text-3xl font-bold"},"Filters",-1)),r("div",K,[r("div",Q,[o[2]||(o[2]=r("label",{for:"checkin"},"Reserved From",-1)),a(e(B),{modelValue:c.from_date,"onUpdate:modelValue":o[0]||(o[0]=b=>c.from_date=b),manualInput:!0,id:"checkin"},null,8,["modelValue"])]),r("div",W,[o[3]||(o[3]=r("label",{for:"checkin"},"Reserved To",-1)),a(e(B),{modelValue:c.to_date,"onUpdate:modelValue":o[1]||(o[1]=b=>c.to_date=b),manualInput:!0,id:"checkout",minDate:c.from_date},null,8,["modelValue","minDate"])])]),r("div",X,[a(e(f),{label:"Filter",outlined:"",onClick:w})])]))}},ee={class:"flex justify-between gap-2 mb-3"},te={class:""},ae={key:0,class:"flex gap-2"},ie={key:1,class:"flex gap-2"},ne={key:2,class:"flex gap-2"},oe={class:"flex justify-between"},re={class:""},se={layout:O},xe=Object.assign(se,{__name:"Index",props:{reservations:{required:!0}},setup(h){const g=A(),c=M();function k(i,d){const t=d==="confirm"?"Are you sure you want to confirm this booking?":"Are you sure you want to cancel this booking?";g.require({message:t,header:"Confirmation",icon:"pi pi-info-circle",acceptClass:d==="confirm"?"p-button-success":"p-button-danger",accept:()=>{const p=d==="confirm"?"admin.reservations.confirm":"admin.reservations.cancel";y.put(route(p,i),{},{preserveScroll:!0})}})}function w(i){g.require({message:"Are you sure you want to check-in this guest?",header:"Check-in Confirmation",icon:"pi pi-info-circle",acceptClass:"p-button-primary",accept:()=>{y.put(route("admin.reservations.checkin",i),{},{preserveScroll:!0})}})}function n(i){g.require({message:"Are you sure this guest is checking out?",header:"Check-out Confirmation",icon:"pi pi-info-circle",acceptClass:"p-button-warning",accept:()=>{y.put(route("admin.reservations.checkout",i),{},{preserveScroll:!0})}})}function o(i){return i==="pending"?"p-tag-warning":i==="confirmed"?"p-tag-success":i==="canceled"?"p-tag-danger":""}function b(i){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(i)}function $(i){return new Date(i).toLocaleDateString()}function x(i){return i?new Date(i).toLocaleString("id-ID"):"N/A"}function F(i){g.require({message:`Are you sure you want to delete reservation #${i}?`,header:`Delete Reservation #${i}`,icon:"pi pi-info-circle",acceptClass:"p-button-danger",accept:()=>{G.delete(route("admin.reservations.destroy",i)).then(d=>{c.add({severity:"success",summary:"Deleted successfully",detail:`Reservation #${i} is deleted successfully`,life:3e3}),y.reload({preserveState:!1})})}})}const I=j();function T(){I.open(P,{props:{modal:!0}})}function q(){y.visit(route("admin.reservations.index"))}return(i,d)=>(l(),_(C,null,[a(e(L),{title:"Reservations"}),a(e(Y),{scrollable:"",value:h.reservations.data,tableStyle:"min-width: 75rem","striped-rows":"",class:"bg-slate-100/80"},{header:s(()=>[r("div",ee,[d[0]||(d[0]=r("div",{class:""},[r("span",{class:"text-5xl font-bold text-900"},"Reservations")],-1)),r("div",te,[a(e(f),{label:"Clear Filter",class:"mr-3",outlined:"",icon:"pi pi-filter-slash",onClick:q}),a(e(f),{label:"Filter",icon:"pi pi-filter",class:"mr-3",onClick:T,outlined:""}),a(e(V),{href:i.route("admin.reservations.create")},{default:s(()=>[a(e(f),{label:"Create",icon:"pi pi-plus",outlined:"",class:"mr-3"})]),_:1},8,["href"]),a(e(V),{href:i.route("admin.reservations.archives")},{default:s(()=>[a(e(f),{label:"Deleted Reservations",icon:"",severity:"danger",text:""})]),_:1},8,["href"])])])]),empty:s(()=>d[1]||(d[1]=[r("h3",{class:"text-lg font-normal text-center"}," No reservation is found. ",-1)])),footer:s(()=>[r("div",oe,[r("div",re,[r("span",null,"Showing "+u(h.reservations.from)+" to "+u(h.reservations.to)+" of "+u(h.reservations.total)+" results.",1)]),a(z,{"current-page":h.reservations.current_page,"total-pages":h.reservations.last_page,"route-name":"admin.reservations.index"},null,8,["current-page","total-pages"])])]),default:s(()=>[a(e(m),{field:"id",header:"id"}),a(e(m),{field:"room_id",header:"Room No"},{body:s(t=>[(l(!0),_(C,null,E(t.data.room_id,(p,S)=>(l(),_("span",{key:`${t.index}${S}`},[S<t.data.room_id.length-1?(l(),_(C,{key:0},[v(u(p)+", ",1)],64)):(l(),_(C,{key:1},[v(u(p),1)],64))]))),128))]),_:1}),a(e(m),{field:"guest_name",header:"Guest Name"}),a(e(m),{field:"status",header:"Status"},{body:s(t=>[r("span",{class:U(["p-tag",o(t.data.status)])},u(t.data.status),3)]),_:1}),a(e(m),{header:"Total Person",field:"total_person"}),a(e(m),{field:"total_price",header:"Price"},{body:s(t=>[v(u(b(t.data.total_price)),1)]),_:1}),a(e(m),{field:"from_date",header:"Reserved From"},{body:s(t=>[v(u($(t.data.from_date)),1)]),_:1}),a(e(m),{field:"to_date",header:"Reserved To"},{body:s(t=>[v(u($(t.data.to_date)),1)]),_:1}),a(e(m),{field:"checkin_time",header:"Checkin Time"},{body:s(t=>[v(u(x(t.data.checkin_time)),1)]),_:1}),a(e(m),{field:"checkout_time",header:"Checkout Time"},{body:s(t=>[v(u(x(t.data.checkout_time)),1)]),_:1}),a(e(m),{header:"Actions",class:"w-52"},{body:s(t=>[t.data.status==="pending"?(l(),_("div",ae,[a(e(f),{icon:"pi pi-check","aria-label":"Confirm",size:"small",class:"p-button-success",onClick:p=>k(t.data.id,"confirm")},null,8,["onClick"]),a(e(f),{icon:"pi pi-times","aria-label":"Cancel",size:"small",class:"p-button-danger",onClick:p=>k(t.data.id,"cancel")},null,8,["onClick"])])):t.data.status==="confirmed"?(l(),_("div",ie,[t.data.checkin_time?t.data.checkout_time?(l(),D(e(f),{key:2,"aria-label":"Delete",icon:"pi pi-trash",severity:"danger",size:"small",outlined:"",onClick:p=>F(t.data.id)},null,8,["onClick"])):(l(),D(e(f),{key:1,label:"Check-out",icon:"pi pi-sign-out",size:"small",class:"p-button-warning",onClick:p=>n(t.data.id)},null,8,["onClick"])):(l(),D(e(f),{key:0,label:"Check-in",icon:"pi pi-sign-in",size:"small",class:"p-button-primary",onClick:p=>w(t.data.id)},null,8,["onClick"]))])):(l(),_("div",ne,[a(e(f),{"aria-label":"Delete",icon:"pi pi-trash",severity:"danger",size:"small",outlined:"",onClick:p=>F(t.data.id)},null,8,["onClick"])]))]),_:1})]),_:1},8,["value"]),a(e(J),{position:"bottom-right"}),a(e(H))],64))}});export{xe as default};
