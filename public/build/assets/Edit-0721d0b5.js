import{T as R,C,r as V,B as w,j as I,o as i,f as O,a as r,u as e,b as l,t as d,n as _,c as n,w as m,g as u,D as $,F as B,Z as E,d as c}from"./app-2dcae80d.js";import{s as j}from"./button.esm-9e6fb8b8.js";import{s as y}from"./calendar.esm-b6f177df.js";import{s as f}from"./inlinemessage.esm-0ec14736.js";import{s as S}from"./virtualscroller.esm-dd1c2e67.js";import{s as M}from"./inputtext.esm-ee8c0c16.js";import{s as A}from"./multiselect.esm-604803f9.js";import{_ as L}from"./AdminLayout-9dae27c2.js";import"./index.esm-2267cb30.js";import"./overlayeventbus.esm-cc52214e.js";import"./portal.esm-9d0ff783.js";import"./checkbox.esm-5eac2d71.js";import"./toast.esm-9cb58b5c.js";import"./confirmdialog.esm-1013cf0d.js";import"./dialog.esm-89cdd475.js";const z={class:"mb-3 text-5xl font-bold"},G={class:"[&>div]:mt-2"},K={class:"mb-3"},Z={class:"gap-x-3 flex flex-wrap mb-3"},q={class:"md:w-1/2 flex flex-col flex-1 flex-shrink-0 w-full"},H={class:"md:w-1/2 flex flex-col flex-1 flex-shrink-0 w-full"},J={class:"md:w-1/2 flex flex-col flex-1 flex-shrink-0 w-full"},Q={class:"flex flex-col flex-shrink-0 w-full"},W={class:"gap-x-3 flex mt-2"},X={class:"flex flex-col w-1/2"},Y={class:"flex flex-col w-1/2"},ee={class:"gap-x-3 flex mt-2"},te={class:"flex flex-col w-1/2"},le={class:"flex flex-col w-1/2"},oe={class:"mb-3"},se={layout:L},ye=Object.assign(se,{__name:"Edit",props:{id:Number,rooms:Array,room_id:Array,guest_name:String,total_person:Number,total_price:Number,from_date:String,to_date:String,checkin_time:String,checkout_time:String,errors:Object},setup(T){const D=T,{rooms:N,errors:o,id:g,...p}=D,s=R({...p,checkin_time:"",checkout_time:"",from_date:new Date(p.from_date),to_date:new Date(p.to_date)}),U=C();function F(){s.put(route("admin.reservations.update",D.id),{preserveState:!0,onSuccess:()=>U.add({severity:"success",summary:"Success",detail:"Updated Reservation Successfully",life:3e3})})}const h=V(new Date),v=V(p.checkin_time?new Date(p.checkin_time):null),b=V(p.checkout_time?new Date(p.checkout_time):null);w(()=>{s.checkin_time=v.value?new Date(v.value).toISOString():""}),w(()=>{s.checkout_time=b.value?new Date(b.value).toISOString():""});let k=I(()=>D.rooms.filter(x=>s.room_id.indexOf(x.id)>=0).reduce((x,t)=>x+t.price,0));return w(()=>{let x=new Date(s.from_date),t=new Date(s.to_date),P=Math.abs(t.getTime()-x.getTime())/(1e3*60*60*24);s.total_price=(P+1)*k.value||0}),(x,t)=>(i(),O(B,null,[r(e(E),{title:`Edit Reservation #${e(g)}`},null,8,["title"]),l("div",null,[l("h1",z,"Edit Reservation #"+d(e(g)),1),l("div",G,[l("div",K,[t[14]||(t[14]=l("h2",{class:"mb-2 text-3xl font-normal"},"Room",-1)),l("div",Z,[l("div",q,[t[8]||(t[8]=l("label",{for:"room"},"Room Number",-1)),r(e(A),{modelValue:e(s).room_id,"onUpdate:modelValue":t[0]||(t[0]=a=>e(s).room_id=a),options:e(N),optionLabel:"room_number",optionValue:"id",filter:"",placeholder:"Select rooms",maxSelectedLabels:5,class:_(["w-full",{"p-invalid":e(o).room_id}])},null,8,["modelValue","options","class"]),e(o).room_id?(i(),n(e(f),{key:0,severity:"error",class:"mt-2"},{default:m(()=>[c(d(e(o).room_id),1)]),_:1})):u("",!0)]),l("div",H,[t[9]||(t[9]=l("label",{for:"guest_name"},"Guest Name",-1)),r(e(M),{id:"guest_name",modelValue:e(s).guest_name,"onUpdate:modelValue":t[1]||(t[1]=a=>e(s).guest_name=a),class:_([{"p-invalid":e(o).guest_name},""])},null,8,["modelValue","class"]),e(o).guest_name?(i(),n(e(f),{key:0,severity:"error",class:"mt-2"},{default:m(()=>[c(d(e(o).guest_name),1)]),_:1})):u("",!0)]),l("div",J,[t[10]||(t[10]=l("label",{for:"totalPerson"},"Total Number Of Person",-1)),r(e(S),{id:"totalPerson",modelValue:e(s).total_person,"onUpdate:modelValue":t[2]||(t[2]=a=>e(s).total_person=a),class:_([{"p-invalid":e(o).total_person},""])},null,8,["modelValue","class"]),e(o).total_person?(i(),n(e(f),{key:0,severity:"error",class:"mt-2"},{default:m(()=>[c(d(e(o).total_person),1)]),_:1})):u("",!0)]),l("div",Q,[t[11]||(t[11]=l("label",{for:"pricePerDay"},"Price Per Day",-1)),r(e(S),{id:"pricePerDay",disabled:"",mode:"currency",currency:"MMK",modelValue:e(k),"onUpdate:modelValue":t[3]||(t[3]=a=>$(k)?k.value=a:k=a),pt:{input:{class:"!opacity-100"}}},null,8,["modelValue"]),e(o).total_price?(i(),n(e(f),{key:0,severity:"error",class:"mt-2"},{default:m(()=>[c(d(e(o).total_price),1)]),_:1})):u("",!0)])]),t[15]||(t[15]=l("h3",{class:"mb-2 text-3xl font-normal"},"Room Reservation Date",-1)),l("div",W,[l("div",X,[t[12]||(t[12]=l("label",{for:"reservedFrom"},"From",-1)),r(e(y),{modelValue:e(s).from_date,"onUpdate:modelValue":t[4]||(t[4]=a=>e(s).from_date=a),minDate:h.value,manualInput:!1,id:"reservedFrom",class:_([{"p-invalid":e(o).from_date},"w-full"]),pt:{input:{class:"p-4 rounded"}}},null,8,["modelValue","minDate","class"]),e(o).from_date?(i(),n(e(f),{key:0,severity:"error",class:"mt-2"},{default:m(()=>[c(d(e(o).from_date),1)]),_:1})):u("",!0)]),l("div",Y,[t[13]||(t[13]=l("label",{for:"reservedTo"},"To",-1)),r(e(y),{modelValue:e(s).to_date,"onUpdate:modelValue":t[5]||(t[5]=a=>e(s).to_date=a),minDate:e(s).from_date||null,manualInput:!1,id:"reservedTo",class:_({"p-invalid":e(o).to_date}),pt:{input:{class:"p-4 rounded"}}},null,8,["modelValue","minDate","class"]),e(o).to_date?(i(),n(e(f),{key:0,severity:"error",class:"mt-2"},{default:m(()=>[c(d(e(o).to_date),1)]),_:1})):u("",!0)])])]),l("div",ee,[l("div",te,[t[16]||(t[16]=l("label",{for:"checkin"},"Checkin",-1)),r(e(y),{modelValue:v.value,"onUpdate:modelValue":t[6]||(t[6]=a=>v.value=a),minDate:e(s).from_date||h.value,maxDate:e(s).to_date||null,manualInput:!1,id:"checkin",showTime:!0,hourFormat:"24",class:_({"p-invalid":e(o).checkin_time}),disabled:!e(s).from_date,pt:{input:{class:"p-4 rounded"}}},null,8,["modelValue","minDate","maxDate","class","disabled"]),e(o).checkin_time?(i(),n(e(f),{key:0,severity:"error",class:"mt-2"},{default:m(()=>[c(d(e(o).checkin_time),1)]),_:1})):u("",!0)]),l("div",le,[t[17]||(t[17]=l("label",{for:"checkout"},"Checkout",-1)),r(e(y),{modelValue:b.value,"onUpdate:modelValue":t[7]||(t[7]=a=>b.value=a),minDate:v.value||null,manualInput:!0,id:"checkout",showTime:!0,hourFormat:"24",class:_({"p-invalid":e(o).checkout_time}),disabled:!v.value,pt:{input:{class:"p-4 rounded"}}},null,8,["modelValue","minDate","class","disabled"]),e(o).checkout_time?(i(),n(e(f),{key:0,severity:"error",class:"mt-2"},{default:m(()=>[c(d(e(o).checkout_time),1)]),_:1})):u("",!0)])]),l("div",oe,[r(e(j),{label:"Update Reservation",outlined:"",onClick:F,loading:e(s).processing},null,8,["loading"])])])])],64))}});export{ye as default};
